<div class="container-fluid">
  <app-page-title
    title="Hồ sơ"
    [breadcrumbItems]="breadCrumbItems"
  ></app-page-title>

  <div class="row">
    <div class="col-xl-5">
      <div class="card-box">
        <div class="title-section mt-2">Thông tin khách hàng</div>
        <div class="form-group mb-3">
          <label class="sr-only">Search</label>
          <input class="form-control" placeholder="Search..." />
        </div>
        <div class="form-row row mb-3">
          <label class="col-4 col-form-label">Họ và tên</label>
          <div class="col-8">
            <input class="form-control" />
          </div>
        </div>
        <div class="form-row row mb-3">
          <label class="col-4 col-form-label">Số điện thoại</label>
          <div class="col-8">
            <input class="form-control" />
          </div>
        </div>
        <div class="title-section mt-2">Thởi gian yêu cầu</div>
        <div class="form-row">
          <div class="form-group mb-3">
            <label>Bắt đầu</label>
            <div class="input-group clockpicker">
              <input
                ngbDatepicker
                class="form-control"
                autoClose="false"
                placeholder="yyyy-mm-dd"
                #date="ngbDatepicker"
              />
              <div class="input-group-append" (click)="date.toggle()">
                <span class="input-group-text"
                  ><i class="mdi mdi-calendar"></i
                ></span>
              </div>
            </div>
          </div>
          <div class="form-group mb-3 form-group-custom">
            <div class="input-group">
              <select class="custom-select" class="form-control">
                <option *ngFor="let item of selectionTime">{{
                  item.value
                }}</option>
              </select>
            </div>
          </div>
          <div class="form-group mb-3">
            <label>Kết thúc</label>
            <div class="input-group clockpicker">
              <input
                ngbDatepicker
                class="form-control"
                autoClose="false"
                placeholder="yyyy-mm-dd"
                #date="ngbDatepicker"
              />
              <div class="input-group-append" (click)="date.toggle()">
                <span class="input-group-text"
                  ><i class="mdi mdi-calendar"></i
                ></span>
              </div>
            </div>
          </div>
          <div class="form-group mb-3" style="width: 20%;">
            <div class="custom-control custom-checkbox">
              <input
                type="checkbox"
                class="custom-control-input"
                id="customCheck11"
                (change)="onChangeRepeatCheckbox($event)"
              />
              <label class="custom-control-label" for="customCheck11"
                >Nhắc lại</label
              >
            </div>
            <div class="input-group">
              <select class="custom-select" class="form-control">
                <option *ngFor="let item of selectionTime">{{
                  item.value
                }}</option>
              </select>
            </div>
          </div>
        </div>
        <div *ngIf="repeat !== ''">
          <label>Nhắc lại</label>
          <div class="form-row">
            <div class="form-group row mb-3" style="width: 50%;">
              <label class="col-4 col-form-label">Bắt đầu</label>
              <div class="col-8">
                <div class="input-group clockpicker">
                  <input
                    ngbDatepicker
                    class="form-control"
                    autoClose="false"
                    placeholder="yyyy-mm-dd"
                    #date="ngbDatepicker"
                  />
                  <div class="input-group-append" (click)="date.toggle()">
                    <span class="input-group-text"
                      ><i class="mdi mdi-calendar"></i
                    ></span>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group row mb-3" style="width: 50%;">
              <label class="col-4 col-form-label">Kết thúc</label>
              <div class="col-8">
                <div class="input-group clockpicker">
                  <input
                    ngbDatepicker
                    class="form-control"
                    autoClose="false"
                    placeholder="yyyy-mm-dd"
                    #date="ngbDatepicker"
                  />
                  <div class="input-group-append" (click)="date.toggle()">
                    <span class="input-group-text"
                      ><i class="mdi mdi-calendar"></i
                    ></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group row mb-3" style="width: 50%;">
              <div class="input-group">
                <select
                  class="custom-select"
                  class="form-control"
                  (change)="onChangeRepeatSelect($event)"
                >
                  <option value="day">Mỗi ngày</option>
                  <option value="week">Mỗi tuần</option>
                  <option value="month">Mỗi tháng</option>
                  <option value="year">Mỗi năm</option>
                </select>
              </div>
            </div>
            <div class="form-group row mb-3" style="width: 50%;"></div>
          </div>
          <div *ngIf="repeat === 'day'" class="d-flex justify-content-around">
            <div class="radio radio-info form-check-inline">
              <input type="radio" value="option1" name="radioInline" checked />
              <label>
                Mỗi
                <select class="custom-select" class="form-control">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                </select>
                ngày
              </label>
            </div>
            <div class="radio form-check-inline">
              <input type="radio" value="option2" name="radioInline" />
              <label> Mỗi cuối tuần </label>
            </div>
          </div>
          <div *ngIf="repeat === 'week'">
            <div style="width: 50%;">
              <label>
                Mỗi
                <select class="custom-select" class="form-control">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                </select>
                tuần trong
              </label>
            </div>
            <div class="radio form-check-inline">
              <input type="radio" value="monday" name="radioInline" />
              <label> Thứ 2 </label>
            </div>
            <div class="radio form-check-inline">
              <input type="radio" value="tuesday" name="radioInline" />
              <label> Thứ 3 </label>
            </div>
            <div class="radio form-check-inline">
              <input type="radio" value="wednesday" name="radioInline" />
              <label> Thứ 4 </label>
            </div>
            <div class="radio form-check-inline">
              <input type="radio" value="thursday" name="radioInline" />
              <label> Thứ 5 </label>
            </div>
            <div class="radio form-check-inline">
              <input type="radio" value="friday" name="radioInline" />
              <label> Thứ 6 </label>
            </div>
            <div class="radio form-check-inline">
              <input type="radio" value="saturday" name="radioInline" />
              <label> Thứ 7 </label>
            </div>
            <div class="radio form-check-inline">
              <input type="radio" value="sunday" name="radioInline" />
              <label> Chủ nhật </label>
            </div>
          </div>
          <div *ngIf="repeat === 'month'">
            <div style="width: 50%;">
              <label>
                Mỗi
                <select
                  class="custom-select"
                  class="form-control"
                  style="width: 80px;"
                >
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                </select>
                tháng
              </label>
            </div>
            <div class="custom-control custom-radio">
              <input
                type="radio"
                name="customRadio"
                class="custom-control-input"
              />
              <label class="custom-control-label"
                >Trong ngày
                <select
                  class="custom-select"
                  class="form-control"
                  style="width: 80px;"
                >
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                </select></label
              >
            </div>
            <div class="custom-control custom-radio">
              <input
                type="radio"
                id="customRadio2"
                class="custom-control-input"
              />
              <label class="custom-control-label"
                >Trong
                <select
                  class="custom-select"
                  class="form-control"
                  style="width: 150px;"
                >
                  <option value="1">Thứ 2</option>
                  <option value="2">Thứ 3</option>
                  <option value="3">Thứ 4</option>
                  <option value="4">Thứ 5</option>
                  <option value="5">Thứ 6</option>
                  <option value="6">Thứ 7</option>
                  <option value="7">Chủ nhật</option>
                </select>
                <select
                  class="custom-select"
                  class="form-control"
                  style="width: 150px;"
                >
                  <option value="1">Đầu tiên</option>
                  <option value="2">Thứ 2</option>
                  <option value="3">Thứ 3</option>
                  <option value="4">Cuối cùng</option>
                </select></label
              >
            </div>
          </div>
          <div *ngIf="repeat === 'year'">
            <div style="width: 50%;">
              <label>
                Mỗi
                <select
                  class="custom-select"
                  class="form-control"
                  style="width: 80px;"
                >
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                </select>
                năm trong
                <select
                  class="custom-select"
                  class="form-control"
                  style="width: 150px;"
                >
                  <option value="1">Tháng 1</option>
                  <option value="2">Tháng 2</option>
                  <option value="3">Tháng 3</option>
                  <option value="4">Tháng 4</option>
                </select>
              </label>
            </div>
            <div class="custom-control custom-radio">
              <input
                type="radio"
                name="customRadio"
                class="custom-control-input"
              />
              <label class="custom-control-label"
                >Trong ngày
                <select
                  class="custom-select"
                  class="form-control"
                  style="width: 80px;"
                >
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                </select></label
              >
            </div>
            <div class="custom-control custom-radio">
              <input
                type="radio"
                id="customRadio2"
                class="custom-control-input"
              />
              <label class="custom-control-label"
                >Trong
                <select
                  class="custom-select"
                  class="form-control"
                  style="width: 150px;"
                >
                  <option value="1">Thứ 2</option>
                  <option value="2">Thứ 3</option>
                  <option value="3">Thứ 4</option>
                  <option value="4">Thứ 5</option>
                  <option value="5">Thứ 6</option>
                  <option value="6">Thứ 7</option>
                  <option value="7">Chủ nhật</option>
                </select>
                <select
                  class="custom-select"
                  class="form-control"
                  style="width: 150px;"
                >
                  <option value="1">Đầu tiên</option>
                  <option value="2">Thứ 2</option>
                  <option value="3">Thứ 3</option>
                  <option value="4">Cuối cùng</option>
                </select></label
              >
            </div>
          </div>
        </div>
        <div class="title-section mt-2">Danh sách nhân viên rảnh</div>
        <div class="table-responsive">
          <table class="table table-centered table-hover mb-0">
            <thead>
              <tr>
                <th>Mã nhân viên</th>
                <th>Tên nhân viên</th>
                <th>Số điện thoại</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  NV01
                </td>
                <td>
                  Nguyễn văn A
                </td>
                <td>
                  01992810011
                </td>
              </tr>
              <tr>
                <td>
                  NV02
                </td>
                <td>
                  Nguyễn văn AB
                </td>
                <td>
                  01992810011
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <!-- end card-box-->
    </div>
    <div class="col-xl-7">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="card-body">
                  <div class="app-calendar">
                    <!-- calendar -->
                    <full-calendar
                      #calendar
                      defaultView="dayGridMonth"
                      [header]="{
                        left: 'prev,next today',
                        center: 'title',
                        right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
                      }"
                      [plugins]="calendarPlugins"
                      themeSystem="bootstrap"
                      [weekends]="calendarWeekends"
                      deepChangeDetection="true"
                      [events]="calendarEvents"
                      (dateClick)="openModal(content, $event)"
                      (eventClick)="openEditModal(editcontent, $event)"
                    >
                    </full-calendar>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Event Modal -->
<ng-template #content let-modal="close">
  <div class="modal-header">
    <h4 class="modal-title">Add New Event</h4>
    <button
      type="button"
      class="close"
      aria-hidden="true"
      (click)="modal('Cross click')"
    >
      ×
    </button>
  </div>
  <div class="modal-body p-3">
    <form (ngSubmit)="saveEvent()" [formGroup]="formData">
      <div class="row">
        <div class="col-12">
          <div class="form-group">
            <label class="control-label">Event Name</label>
            <input
              class="form-control"
              placeholder="Insert Event Name"
              type="text"
              name="title"
              formControlName="title"
              [ngClass]="{ 'is-invalid': submitted && form.title.errors }"
            />
            <div
              *ngIf="submitted && form.title.errors"
              class="invalid-feedback"
            >
              <span *ngIf="form.title.errors.required"
                >This value is required.</span
              >
            </div>
          </div>
        </div>
        <div class="col-12">
          <div class="form-group">
            <label class="control-label">Category</label
            ><select
              class="form-control"
              name="category"
              formControlName="category"
              [ngClass]="{ 'is-invalid': submitted && form.category.errors }"
            >
              <option
                *ngFor="let option of category"
                value="{{ option.value }}"
              >
                {{ option.name }}</option
              >
            </select>
            <div
              *ngIf="submitted && form.category.errors"
              class="invalid-feedback"
            >
              <div *ngIf="form.category.errors.required">
                This value is required
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="text-right pt-4 mt-2">
        <button
          type="button"
          class="btn btn-light"
          (click)="modal('Cross click')"
        >
          Close
        </button>
        <button type="submit" class="btn btn-success save-event ml-1">
          Create event
        </button>
      </div>
    </form>
  </div>
</ng-template>

<!-- Edit event modal -->
<ng-template #editcontent let-modal="close">
  <div class="modal-header">
    <h4 class="modal-title">Edit Event</h4>
    <button
      type="button"
      class="close"
      aria-hidden="true"
      (click)="modal('Cross click')"
    >
      ×
    </button>
  </div>
  <div class="modal-body p-3">
    <form [formGroup]="formEditData" (ngSubmit)="editEventSave()">
      <label>Change event name</label>
      <div class="input-group m-b-15">
        <input class="form-control" type="text" formControlName="editTitle" />
        <span class="input-group-append"
          ><button type="submit" class="btn btn-success btn-md">
            <i class="fa fa-check"></i>
            Save
          </button></span
        >
      </div>
    </form>
  </div>
  <div class="text-right p-3">
    <button type="button" class="btn btn-light" (click)="modal('Close')">
      Close
    </button>
    <button
      type="button"
      class="btn btn-danger delete-event ml-1"
      (click)="deleteEventData()"
    >
      Delete
    </button>
  </div>
</ng-template>
