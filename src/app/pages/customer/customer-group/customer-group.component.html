<div class="container-fluid">
  <app-page-title
    title="Nhóm khách hàng"
    [breadcrumbItems]="breadCrumbItems"
  ></app-page-title>

  <div class="row">
    <div class="col-xl-8 order-xl-1 order-2">
      <div class="card mb-2">
        <div class="card-body">
          <div class="row">
            <div class="col-lg-8">
              <form class="form-inline row">
                <div class="form-group col-sm-auto">
                  <input
                    type="search"
                    class="form-control"
                    placeholder="Tìm kiếm..."
                    name="search"
                    [(ngModel)]="term"
                  />
                </div>
                <div class="form-group col-sm-auto">
                  <label for="status-select" class="mr-2">Sắp xếp</label>
                  <select class="custom-select" id="status-select">
                    <option selected="">Tất cả</option>
                    <option value="1">Khách quen</option>
                    <option value="2">Khách VIP</option>
                    <option value="3">Khách BNI</option>
                    <option value="4">Khách khác</option>
                  </select>
                </div>
              </form>
            </div>
            <div class="col-lg-4">
              <div class="text-lg-right mt-3 mt-lg-0">
                <button type="button" class="btn btn-success mr-1">
                  <i class="mdi mdi-settings"></i>
                </button>
                <a
                  href="javascript: void(0);"
                  class="btn btn-danger"
                  (click)="openModal(content)"
                  ><i class="mdi mdi-plus-circle mr-1"></i> Thêm mới</a
                >
              </div>
            </div>
            <!-- end col-->
          </div>
          <!-- end row -->
        </div>
        <!-- end card-body-->
      </div>
      <!-- end card-->

      <div
        class="card-box mb-2"
        *ngFor="let opportunity of opportunityData | filter: term"
      >
        <div class="row align-items-center">
          <div class="col-sm-10">
            <div class="media">
              <img
                class="d-flex align-self-center mr-3 rounded-circle"
                src="{{ opportunity.company }}"
                alt="Generic placeholder image"
                height="64"
              />
              <div class="media-body">
                <h4 class="mt-0 mb-2 font-16">{{ opportunity.name }}</h4>
                <div class="row ml-0">
                  <div class="mr-4">
                    <b>Người tạo:</b> {{ opportunity.creator }}
                  </div>
                  <div><b>Ngày tạo:</b> {{ opportunity.created_date }}</div>
                </div>
                <p class="mb-1 mt-2">{{ opportunity.des }}</p>
                <p class="mb-0">
                  <a
                    routerLink="/customer/list-customer"
                    routerLinkActive="active"
                    class="badge badge-primary"
                    style="font-size: 90%;"
                    >Danh sách khách hàng</a
                  >
                </p>
              </div>
            </div>
          </div>
          <div class="col-sm-2">
            <div class="text-sm-right">
              <a href="javascript:void(0);" class="action-icon">
                <i class="mdi mdi-square-edit-outline"></i
              ></a>
              <a href="javascript:void(0);" class="action-icon">
                <i class="mdi mdi-delete"></i
              ></a>
            </div>
          </div>
          <!-- end col-->
        </div>
        <!-- end row -->
      </div>
      <!-- end card-box-->
      <div class="text-center my-4">
        <a href="javascript:void(0);" class="text-danger"
          ><i class="mdi mdi-spin mdi-loading mr-1"></i> Tải thêm
        </a>
      </div>
    </div>
    <div class="col-xl-4 order-xl-2 order-1">
      <div class="card-box" dir="ltr">
        <h4 class="header-title mb-3 text-center">
          Tỷ lệ phân bố nhóm khách hàng
        </h4>

        <div class="text-center">
          <apx-chart
            [series]="simplePieChart.series"
            [chart]="simplePieChart.chart"
            [labels]="simplePieChart.labels"
            [dataLabels]="simplePieChart.dataLabels"
            [legend]="simplePieChart.legend"
            [colors]="simplePieChart.colors"
            [responsive]="simplePieChart.responsive"
          >
          </apx-chart>
          <p class="text-muted font-15 font-family-secondary mb-0 mt-3">
            <span class="mr-2"
              ><i class="mdi mdi-checkbox-blank-circle text-info"></i> Khách
              quen</span
            >
            <span class="mr-2"
              ><i class="mdi mdi-checkbox-blank-circle text-primary"></i> Khách
              VIP</span
            >
            <span class="mr-2"
              ><i class="mdi mdi-checkbox-blank-circle text-warning"></i> Khách
              BNI</span
            >
            <span
              ><i class="mdi mdi-checkbox-blank-circle text-danger"></i> Khách
              khác</span
            >
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Opportunities model -->
<ng-template #content role="document" let-modal="close">
  <div class="modal-header bg-dark">
    <h4 class="modal-title text-white">Add New Opportunities</h4>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="modal('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body p-3">
    <div class="text-left">
      <form (ngSubmit)="saveData()" [formGroup]="validationform">
        <div class="form-group">
          <label for="name">Company Name</label>
          <input
            type="text"
            class="form-control"
            id="name"
            placeholder="Enter company name"
            formControlName="name"
            [ngClass]="{ 'is-invalid': submitted && form.name.errors }"
          />
          <div *ngIf="submitted && form.name.errors" class="invalid-feedback">
            <span *ngIf="form.name.errors.required"
              >This value is required.</span
            >
            <span *ngIf="form.name.errors.pattern"
              >This value should be a valid name.</span
            >
          </div>
        </div>

        <div class="form-group">
          <label for="email">Email address</label>
          <input
            class="form-control"
            id="email"
            placeholder="Enter email"
            formControlName="email"
            [ngClass]="{ 'is-invalid': submitted && form.email.errors }"
          />
          <div *ngIf="submitted && form.email.errors" class="invalid-feedback">
            <span *ngIf="form.email.errors.required"
              >This value is required.</span
            >
            <span *ngIf="form.email.errors.pattern"
              >Please enter valid email.</span
            >
          </div>
        </div>

        <div class="form-group">
          <label>Phone </label>
          <input
            type="text"
            class="form-control"
            placeholder="Enter phone number"
            formControlName="phone"
            [ngClass]="{ 'is-invalid': submitted && form.phone.errors }"
            minlength="10"
          />
          <div *ngIf="submitted && form.phone.errors" class="invalid-feedback">
            <span *ngIf="form.phone.errors.required"
              >This value is required.</span
            >
            <span *ngIf="form.phone.errors.minlength"
              >Phone number must be 10 characters.</span
            >
          </div>
        </div>

        <div class="form-group">
          <label>Category </label>
          <input
            class="form-control"
            placeholder="Enter category"
            formControlName="category"
            [ngClass]="{ 'is-invalid': submitted && form.category.errors }"
          />
          <div
            *ngIf="submitted && form.category.errors"
            class="invalid-feedback"
          >
            <span *ngIf="form.category.errors.required"
              >This value is required.</span
            >
          </div>
        </div>

        <div class="text-right">
          <button type="submit" class="btn btn-success">Save</button>
          <button
            type="button"
            class="btn btn-danger ml-1"
            (click)="modal('close click')"
          >
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</ng-template>
