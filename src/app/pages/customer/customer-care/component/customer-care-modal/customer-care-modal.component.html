<div class="modal-header bg-dark">
  <h4 class="modal-title text-white">Giao dịch khách hàng</h4>
  <button type="button" class="close text-white" aria-label="Close" (click)="onClickCancel()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body p-3" [formGroup]="form">
  <!-- #6658dd -->
  <div class="row mt-2" *ngIf="!isView">
    <div class="col-lg-6">
      <form class="form-inline">
        <div class="form-group">
          <label for="customer">
            <input
              id="customer"
              list="searchCustomer"
              placeholder="Tìm kiếm..."
              class="form-control"
              (change)="changeDatalistCustomer($event)"
            />
            <datalist id="searchCustomer">
              <option *ngFor="let customer of customers" [value]="customer.cu_fullname"></option>
            </datalist>
          </label>
        </div>
      </form>
    </div>
    <div class="col-lg-6">
      <div class="text-lg-right mt-3 mt-lg-0">
        <a href="javascript: void(0);" class="btn btn-danger mr-1">Hủy</a>
        <a href="javascript: void(0);" class="btn btn-success"
          ><i class="mdi mdi-plus-circle mr-1"></i> Thêm mới</a
        >
      </div>
    </div>
    <!-- end col-->
  </div>
  <div class="table-responsive border mb-2 mt-2">
    <table class="table table-centered table-hover mb-0">
      <thead>
        <tr>
          <th>MKH</th>
          <th>Hình ảnh</th>
          <th>Khách hàng</th>
          <th>SĐT</th>
          <th>Email</th>
          <th>Địa chỉ</th>
          <th>Ngày tạo</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            {{ transaction?.customer.cu_code }}
          </td>
          <td>
            {{ transaction?.customer.cu_thumbnail }}
          </td>
          <td>
            {{ transaction?.customer.cu_fullname }}
          </td>
          <td>
            {{ transaction?.customer.cu_mobile }}
          </td>
          <td>
            {{ transaction?.customer.cu_email }}
          </td>
          <td>
            {{ transaction?.customer.cu_address }}
          </td>
          <td>
            {{ transaction?.customer.cu_create_date }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <h5>Lịch sử mua hàng</h5>
  <div class="table-responsive border mb-2 mt-2">
    <table class="table table-centered table-hover mb-0">
      <thead>
        <tr>
          <th>Hình ảnh</th>
          <th>Sản phẩm</th>
          <th>Số lượng</th>
          <th>Đơn giá</th>
          <th>Địa chỉ giao hàng</th>
          <th>Ngày mua</th>
          <th>Trạng thái</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of transaction?.customer.list_order_product">
          <td></td>
          <td>
            {{ product.pu_name }}
          </td>
          <td>
            {{ product.op_quantity }}
          </td>
          <td></td>
          <td>
            {{ product.cuo_address }}
          </td>
          <td>
            {{ product.cuo_date | date: 'dd/mm/yyyy' }}
          </td>
          <td>
            {{ product.cuo_status_name }}
          </td>
        </tr>
        <tr *ngIf="transaction?.customer.list_order_product.length === 0">
          <td colspan="7">
            Không có dữ liệu lịch sử mua hàng
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
        <label>Tiêu đề</label>
        <input
          [readonly]="isView"
          class="form-control"
          formControlName="tra_title"
          placeholder="Nhập tiêu đề"
        />
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group">
        <label>Loại giao dịch</label>
        <select class="custom-select" formControlName="tra_type">
          <option [disabled]="isView" *ngFor="let type of types" [value]="type.id">{{
            type.name
          }}</option>
        </select>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group">
        <label>Mức độ ưu tiên</label>
        <select class="custom-select" formControlName="tra_priority">
          <option [disabled]="isView" *ngFor="let priority of priorities" [value]="priority.id">{{
            priority.name
          }}</option>
        </select>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="form-group">
        <label>Nội dung</label>
        <textarea
          rows="3"
          [readonly]="isView"
          class="form-control"
          formControlName="tra_content"
          placeholder="Nhập nội dung"
        ></textarea>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
        <label>Đánh giá</label>
        <input
          [readonly]="isView"
          class="form-control"
          formControlName="tra_rate"
          placeholder="Nhập đánh giá"
        />
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group">
        <label>Người giao việc</label>
        <label for="assigner">
          <input
            [readOnly]="isView"
            id="assigner"
            list="searchAssigner"
            placeholder="Tìm kiếm..."
            class="form-control"
            (change)="changeDatalistAssigner($event)"
          />
          <datalist id="searchAssigner">
            <option *ngFor="let staff of staffs" [value]="staff.sta_fullname"></option>
          </datalist>
        </label>
      </div>
    </div>
    <div class="col-md-3 d-flex align-items-start">
      <div class="form-group">
        <label>Người phụ trách</label>
        <label for="assignee">
          <input
            [readOnly]="isView"
            id="assignee"
            list="searchAssignee"
            placeholder="Tìm kiếm..."
            class="form-control"
            (change)="changeDatalistAssignee($event)"
          />
          <datalist id="searchAssignee">
            <option *ngFor="let staff of staffs" [value]="staff.sta_fullname"></option>
          </datalist>
        </label>
      </div>
      <button
        type="button"
        *ngIf="!isView"
        class="btn btn-info mb-2 mr-1"
        style="font-size: x-large; padding: 0 0.45rem; margin-left: 5px; margin-top: 29px;"
      >
        <i class="mdi mdi-swap-horizontal"></i>
      </button>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
        <label>Kết quả</label>
        <input
          [readonly]="isView"
          class="form-control"
          formControlName="tra_result"
          placeholder="Nhập kết quả"
        />
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group">
        <label>Trạng thái</label>
        <select class="custom-select" formControlName="tra_status">
          <option [disabled]="isView" *ngFor="let status of statuses" [value]="status.id">{{
            status.name
          }}</option>
        </select>
      </div>
    </div>
  </div>
</div>
