<div class="modal-header bg-dark">
  <h4 class="modal-title text-white">
    {{ !order ? 'Thêm mới' : isView ? 'Xem' : 'Cập nhật' }} đơn hàng
  </h4>
  <button type="button" class="close text-white" aria-label="Close" (click)="onClickCancel()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body p-3">
  <!-- #6658dd -->
  <ngb-tabset justify="justified">
    <ngb-tab title="1. Thông tin khách hàng">
      <ng-template ngbTabContent>
        <ng-template [ngTemplateOutlet]="Tab1"></ng-template>
      </ng-template>
    </ngb-tab>
    <ngb-tab title="2. Thông tin đơn hàng">
      <ng-template ngbTabContent>
        <ng-template [ngTemplateOutlet]="Tab2"></ng-template>
      </ng-template>
    </ngb-tab>
    <ngb-tab title="3. Hóa đơn">
      <ng-template ngbTabContent>
        <ng-template [ngTemplateOutlet]="Tab3"></ng-template>
      </ng-template>
    </ngb-tab>
  </ngb-tabset>
</div>

<ng-template #Tab1>
  <ngb-progressbar
    type="success"
    [value]="33.33"
    [striped]="true"
    [animated]="true"
  ></ngb-progressbar>
  <div class="row mt-2" *ngIf="!isView">
    <div class="col-lg-8">
      <form class="form-inline row">
        <div class="form-group col-sm-auto">
          <input type="search" class="form-control" placeholder="Tìm kiếm..." name="search" />
        </div>
        <div class="form-group col-sm-auto">
          <label for="status-select" class="mr-2">Sắp xếp</label>
          <select class="custom-select" id="status-select">
            <option selected="">Tất cả</option>
            <option value="1">Khách quen</option>
            <option value="2">Khách VIP</option>
            <option value="3">Khách BNI</option>
            <option value="4">Khách khác</option>
          </select>
        </div>
      </form>
    </div>
    <div class="col-lg-4">
      <div class="text-lg-right mt-3 mt-lg-0">
        <button type="button" class="btn btn-success mr-1">
          <i class="mdi mdi-settings"></i>
        </button>
        <a href="javascript: void(0);" class="btn btn-danger"
          ><i class="mdi mdi-plus-circle mr-1"></i> Thêm mới</a
        >
      </div>
    </div>
  </div>
  <h5 class="mb-3 text-uppercase bg-light p-2">
    <i class="mdi mdi-account-circle mr-1"></i> Thông tin cá nhân
  </h5>
  <div [formGroup]="formCustomer">
    <div class="row">
      <div class="col-md-3">
        <div class="form-group">
          <label>Họ và tên</label>
          <input
            [readonly]="isView"
            class="form-control"
            formControlName="cu_fullname"
            placeholder="Nhập họ và tên"
            f
          />
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-group">
          <label>Số điện thoại</label>
          <input
            [readonly]="isView"
            class="form-control"
            formControlName="cu_mobile"
            placeholder="Nhập số điện thoại"
          />
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-group">
          <label>Email</label>
          <input
            [readonly]="isView"
            class="form-control"
            formControlName="cu_email"
            placeholder="Nhập email"
          />
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-group">
          <label>Ngày sinh</label>
          <input
            [readonly]="isView"
            class="form-control"
            formControlName="cu_birthday"
            placeholder="Nhập ngày sinh"
          />
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3">
        <div class="form-group">
          <label>Nhóm khách hàng</label>
          <select class="custom-select" formControlName="customer_group_id" id="status-select">
            <option *ngFor="let group of groups" [value]="group.cg_id">{{ group.cg_name }}</option>
          </select>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-group">
          <label>Nguồn khách hàng</label>
          <select class="custom-select" formControlName="source_id" id="status-select">
            <option *ngFor="let source of sources" [value]="source.src_id">{{
              source.src_name
            }}</option>
          </select>
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label>Người phụ trách</label>
          <input
            class="form-control"
            [readonly]="isView"
            formControlName="staff_id"
            placeholder="Nhập tên người phụ trách"
          />
        </div>
      </div>
    </div>
    <div class="row" *ngIf="!isView">
      <div class="col-md-4">
        <div class="form-group">
          <label>Địa chỉ</label>
          <input
            class="form-control"
            [readonly]="isView"
            formControlName="cu_address"
            placeholder="Nhập địa chỉ"
          />
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          <label>Tỉnh/Thành phố</label>
          <select class="custom-select" formControlName="cu_province" id="status-select">
            <option *ngFor="let province of provinces" [value]="province.name">{{
              province.name
            }}</option>
          </select>
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          <label>Quận/Huyện</label>
          <select class="custom-select" formControlName="cu_district" id="status-select">
            <option *ngFor="let district of districts" [value]="district.name">{{
              district.name
            }}</option>
          </select>
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          <label>Xã/Phường</label>
          <select class="custom-select" formControlName="cu_ward" id="status-select">
            <option *ngFor="let ward of wards" [value]="ward.name">{{ ward.name }}</option>
          </select>
        </div>
      </div>
      <div class="col-md-2">
        <button type="button" class="btn btn-danger" style="margin-top: 1.8rem;">
          <i class="mdi mdi-plus-circle mr-1"></i>Thêm
        </button>
      </div>
    </div>
    <div class="table-responsive border mb-2">
      <table class="table table-centered table-hover mb-0">
        <thead>
          <tr>
            <th>Địa chỉ chi tiết</th>
            <th>Xã/Phường</th>
            <th>Quận/Huyện</th>
            <th>Tỉnh/Thành phố</th>
            <th *ngIf="!isView">Thao tác</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let address of listAddress">
            <td>
              {{ address.sha_detail }}
            </td>
            <td>
              {{ address.sha_ward }}
            </td>
            <td>
              {{ address.sha_district }}
            </td>
            <td>
              {{ address.sha_province }}
            </td>
            <td *ngIf="!isView">
              <a class="action-icon table-button-link" (click)="openConfirmModal(address)">
                <i class="mdi mdi-square-edit-outline"></i
              ></a>
              <a class="action-icon table-button-link" (click)="openConfirmModal(address)">
                <i class="mdi mdi-delete"></i
              ></a>
            </td>
          </tr>
          <tr *ngIf="listAddress.length === 0">
            <td colspan="6">Không có dữ liệu địa chỉ</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="form-group">
          <label>Ghi chú</label>
          <textarea
            rows="3"
            [readonly]="isView"
            formControlName="cu_note"
            class="form-control"
          ></textarea>
        </div>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-end">
    <button type="button" class="btn btn-primary" (click)="onNextClick()">
      Tiếp theo
    </button>
  </div>
</ng-template>

<ng-template #Tab2>
  <ngb-progressbar
    type="success"
    [value]="66.67"
    [striped]="true"
    [animated]="true"
  ></ngb-progressbar>
  <div class="row mt-2" *ngIf="!isView">
    <div class="col-md-8">
      <form class="form-inline">
        <div class="form-group">
          <input type="search" class="form-control" placeholder="Tìm kiếm sản phẩm" name="search" />
        </div>
      </form>
    </div>
  </div>
  <h5 class="mb-3 text-uppercase bg-light p-2">
    <i class="mdi mdi-account-circle mr-1"></i> Thông tin đơn hàng
  </h5>
  <div class="table-responsive border mb-2">
    <table class="table table-centered table-hover mb-0">
      <thead>
        <tr>
          <th>Tên sản phẩm</th>
          <th>Số lượng</th>
          <th>Đơn giá</th>
          <th>Giảm giá</th>
          <th>Tổng</th>
          <th *ngIf="!isView">Thao tác</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of listProduct">
          <td>
            {{ product.pu_name }}
          </td>
          <td>
            {{ product.op_quantity }}
          </td>
          <td>
            {{ product.pu_unit }}
          </td>
          <td>
            {{ product.op_discount }}
          </td>
          <td>
            {{ product.op_quantity }}
          </td>
          <td *ngIf="!isView">
            <a class="action-icon table-button-link" (click)="openConfirmModal(product)">
              <i class="mdi mdi-square-edit-outline"></i
            ></a>
            <a class="action-icon table-button-link" (click)="openConfirmModal(product)">
              <i class="mdi mdi-delete"></i
            ></a>
          </td>
        </tr>
        <tr *ngIf="listProduct.length === 0">
          <td colspan="6">Không có dữ liệu địa chỉ</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div [formGroup]="formOrder">
    <div class="row">
      <div class="col-md-6"></div>
      <div class="col-md-3 text-right" style="line-height: 2.5;">
        Khuyến mãi
      </div>
      <div class="col-md-3">
        <div class="form-group">
          <input
            [readonly]="isView"
            class="form-control"
            formControlName="cuo_discount"
            placeholder="Nhập khuyến mãi"
          />
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6"></div>
      <div class="col-md-3 text-right" style="line-height: 2.5;">
        Phí vận chuyển
      </div>
      <div class="col-md-3">
        <div class="form-group">
          <input
            [readonly]="isView"
            class="form-control"
            formControlName="cuo_ship_tax"
            placeholder="Nhập phí vận chuyển"
          />
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-9"></div>
    <div class="col-md-3 text-right" style="font-size: 1.2rem;">
      Tổng đơn hàng
    </div>
  </div>
  <div class="row mb-1">
    <div class="col-md-9"></div>
    <div class="col-md-3 text-right" style="font-size: 1.5rem; font-weight: 700;">
      6.150.000 VNĐ
    </div>
  </div>
  <div class="d-flex justify-content-between">
    <button (click)="onBackClick()" class="btn btn-primary">
      Quay lại
    </button>
    <button type="button" class="btn btn-primary" (click)="onNextClick()">
      Tiếp theo
    </button>
  </div>
</ng-template>

<ng-template #Tab3>
  <ngb-progressbar
    type="success"
    [value]="100"
    [striped]="true"
    [animated]="true"
  ></ngb-progressbar>
  <div class="row mt-2" style="font-size: 1.1rem;">
    <div class="col-md-8"></div>
    <div class="col-md-2 text-right">Mã hóa đơn</div>
    <div class="col-md-2 text-right" style="font-weight: bold;">
      DH0814
    </div>
  </div>
  <div class="row" style="font-size: 1.1rem;">
    <div class="col-md-8"></div>
    <div class="col-md-2 text-right">Ngày tạo</div>
    <div class="col-md-2 text-right" style="font-weight: bold;">
      20/02/2020
    </div>
  </div>
  <div class="row" style="font-size: 1.1rem;">
    <div class="col-md-8"></div>
    <div class="col-md-2 text-right">Trạng thái</div>
    <div class="col-md-2 text-right" style="font-weight: bold;">
      Chưa hoàn thành
    </div>
  </div>
  <div class="text-right mt-2" style="font-size: 1.1rem;">
    Địa chỉ giao hàng
  </div>
  <div class="text-right">
    Ông Trần Nam Trung
  </div>
  <div class="text-right">
    0972.88.55.33/trungtran@boot.ai
  </div>
  <div class="text-right">
    Tầng 13, Tòa nhà Detech Tower 2, 107 Nguyễn Phong Sắc
  </div>
  <div class="text-right">
    Cầu Giấy, Hà Nội
  </div>
  <div class="text-right mt-2" style="font-size: 1.1rem;">
    Chi tiết đơn hàng
  </div>
  <div class="table-responsive border mb-2">
    <table class="table table-centered table-hover mb-0">
      <thead>
        <tr>
          <th>Tên sản phẩm</th>
          <th>Ảnh</th>
          <th>Số lượng</th>
          <th>Đơn giá</th>
          <th>Giảm giá</th>
          <th>Tổng</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            Sâm hươu Nga
          </td>
          <td></td>
          <td>
            2
          </td>
          <td>
            1.200.000
          </td>
          <td>
            0
          </td>
          <td>
            2.400.000
          </td>
        </tr>
        <tr>
          <td>
            Sâm hươu Nga
          </td>
          <td></td>
          <td>
            2
          </td>
          <td>
            1.200.000
          </td>
          <td>
            0
          </td>
          <td>
            2.400.000
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="row" style="font-size: 1.1rem;">
    <div class="col-md-8"></div>
    <div class="col-md-2 text-right">Khuyến mãi</div>
    <div class="col-md-2" style="font-weight: bold;">
      10%
    </div>
  </div>
  <div class="row" style="font-size: 1.1rem;">
    <div class="col-md-8"></div>
    <div class="col-md-2 text-right">Phí vận chuyển</div>
    <div class="col-md-2" style="font-weight: bold;">
      130.000 VNĐ
    </div>
  </div>
  <div class="row mb-2">
    <div class="col-md-6">
      <div>Ghi chú</div>
      <div>Đây là ghi chú</div>
    </div>
    <div class="col-md-6 text-right" style="font-size: 1.4rem; font-weight: bold;">
      <span class="mr-2" style="font-size: 1.1rem; color: inherit; font-weight: normal;"
        >Tổng đơn hàng</span
      >6.150.000 VNĐ
    </div>
  </div>
  <div class="d-flex justify-content-end">
    <button (click)="onPrintClick()" class="btn btn-primary" style="min-width: 80px;">
      <i class="mdi mdi-printer"></i>
      In
    </button>
    <button class="btn btn-success ml-2" (click)="onSubmitClick()" style="min-width: 80px;">
      Gửi
    </button>
  </div>
</ng-template>
